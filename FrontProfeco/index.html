<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROFECO - Panel de Administración</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>PROFECO - Panel de Administración</h1>
        </div>
        <div class="user-info">
            <span class="user-name" id="user-name"></span>
            <button class="logout-btn" onclick="logout()">Cerrar sesión</button>
        </div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" data-tab="quejas">Quejas</button>
        <button class="tab-btn" data-tab="precios">Gestión de Precios</button>
        <button class="tab-btn" data-tab="estadisticas">Estadísticas</button>
    </div>

    <div class="content">
        <!-- Tab Quejas -->
        <div id="tab-quejas" class="tab-content active">
            <div class="card">
                <h2 class="card-title">Gestión de Quejas</h2>
                
                <div class="filters">
                    <select id="filtro-estado-queja" class="filter-select">
                        <option value="">Todos los estados</option>
                        <option value="pendiente">Pendiente</option>
                        <option value="en_revision">En Revisión</option>
                        <option value="resuelta">Resuelta</option>
                        <option value="rechazada">Rechazada</option>
                    </select>
                    
                    <select id="filtro-tipo-queja" class="filter-select">
                        <option value="">Todos los tipos</option>
                        <option value="precio">Precio</option>
                        <option value="calidad">Calidad</option>
                        <option value="servicio">Servicio</option>
                        <option value="publicidad_engañosa">Publicidad Engañosa</option>
                        <option value="otro">Otro</option>
                    </select>
                    
                    <button class="btn btn-secondary" onclick="cargarQuejas()">Filtrar</button>
                </div>

                <div id="loading-quejas" class="loading">Cargando quejas...</div>
                
                <div class="table-wrapper" id="tabla-quejas" style="display: none;">
                    <table>
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Usuario</th>
                                <th>Supermercado</th>
                                <th>Tipo</th>
                                <th>Título</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="quejas-table-body"></tbody>
                    </table>
                </div>

                <div id="no-quejas" style="display: none; text-align: center; padding: 40px; color: #999;">
                    No hay quejas disponibles
                </div>
            </div>
        </div>

        <!-- Tab Gestión de Precios -->
        <div id="tab-precios" class="tab-content">
            <div class="card">
                <h2 class="card-title">Gestión de Reportes de Precios</h2>
                
                <div class="filters">
                    <select id="filtro-estado-precio" class="filter-select">
                        <option value="">Todos los estados</option>
                        <option value="pendiente">Pendiente</option>
                        <option value="revisado">Revisado</option>
                        <option value="resuelto">Resuelto</option>
                    </select>
                    
                    <button class="btn btn-secondary" onclick="cargarReportes()">Filtrar</button>
                </div>

                <div id="loading-precios" class="loading">Cargando reportes...</div>
                
                <div class="table-wrapper" id="tabla-precios" style="display: none;">
                    <table>
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Usuario</th>
                                <th>Supermercado</th>
                                <th>Producto</th>
                                <th>Precio Publicado</th>
                                <th>Precio Real</th>
                                <th>Diferencia</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="precios-table-body"></tbody>
                    </table>
                </div>

                <div id="no-precios" style="display: none; text-align: center; padding: 40px; color: #999;">
                    No hay reportes disponibles
                </div>
            </div>
        </div>

        <!-- Tab Estadísticas -->
        <div id="tab-estadisticas" class="tab-content">
            <div class="card">
                <h2 class="card-title">Estadísticas</h2>
                
                <div id="loading-estadisticas" class="loading">Cargando estadísticas...</div>
                
                <div id="estadisticas-content" style="display: none;">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Quejas</h3>
                            <div class="stat-value" id="stat-total-quejas">0</div>
                            <div class="stat-details" id="stat-quejas-detalle"></div>
                        </div>
                        <div class="stat-card">
                            <h3>Reportes de Precios</h3>
                            <div class="stat-value" id="stat-total-reportes">0</div>
                            <div class="stat-details" id="stat-reportes-detalle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para gestionar queja -->
    <div id="modal-queja" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal('modal-queja')">&times;</span>
            <h2>Gestionar Queja</h2>
            <div id="queja-detalle"></div>
            <div class="form-group">
                <label>Estado *</label>
                <select id="queja-estado" class="form-control">
                    <option value="pendiente">Pendiente</option>
                    <option value="en_revision">En Revisión</option>
                    <option value="resuelta">Resuelta</option>
                    <option value="rechazada">Rechazada</option>
                </select>
            </div>
            <div class="form-group">
                <label>Respuesta</label>
                <textarea id="queja-respuesta" class="form-control" rows="4" placeholder="Escribe una respuesta..."></textarea>
            </div>
            <button class="btn btn-primary" onclick="actualizarQueja()">Actualizar Estado</button>
        </div>
    </div>

    <!-- Modal para gestionar precio -->
    <div id="modal-precio" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal('modal-precio')">&times;</span>
            <h2>Gestionar Reporte de Precio</h2>
            <div id="precio-detalle"></div>
            <div class="form-group">
                <label>Estado *</label>
                <select id="precio-estado" class="form-control">
                    <option value="pendiente">Pendiente</option>
                    <option value="revisado">Revisado</option>
                    <option value="resuelto">Resuelto</option>
                </select>
            </div>
            <button class="btn btn-primary" onclick="actualizarPrecio()">Actualizar Estado</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

